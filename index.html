<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Path Planner</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Left Panel: Split into Subpanels with Bottom Actions (25%) -->
        <div class="left-panel">
            <h1>Mission Path Planner</h1>
            
            <div class="sidebar-main">
                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab-button active" data-tab="setup">Setup</button>
                    <button class="tab-button" data-tab="program">Program</button>
                </div>
                
                <!-- Tab Content Container -->
                <div class="tab-content-container">
                    <!-- Setup Tab -->
                    <div class="tab-content active" data-tab="setup">
                    <!-- Team Info Section -->
                    <section class="section">
                        <h2 class="section-header">Team Info<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div class="form-group">
                            <label for="teamName">Team Name:</label>
                            <input type="text" id="teamName" value="Dad's Rule" placeholder="Enter team name">
                        </div>
                        <div class="form-group">
                            <label for="teamLogo">Team Logo URL (optional):</label>
                            <input type="url" id="teamLogo" value="https://lansingtechstudio.org/assets/images/logo.png" placeholder="https://...">
                        </div>
                        </div>
                    </section>

                    <!-- Mat Selection Section -->
                    <section class="section">
                        <h2 class="section-header">Mission Mat<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div class="form-group">
                            <label for="matSelect">Select Mat:</label>
                            <select id="matSelect">
                                <option value="blank">Blank Mat</option>
                                <option value="2025-unearthed" selected>2025 Unearthed</option>
                                <option value="2024-submerged">2024 Submerged</option>
                                <option value="2023-masterpiece">2023 Masterpiece</option>
                                <option value="custom">Custom URL</option>
                            </select>
                        </div>
                        <div class="form-group" id="customMatUrlGroup" style="display: none;">
                            <label for="customMatUrl">Custom Mat URL:</label>
                            <input type="url" id="customMatUrl" placeholder="https://...">
                        </div>
                        <div class="form-group">
                            <label for="matAlignment">Mat Alignment:</label>
                            <select id="matAlignment">
                                <option value="centered">Centered</option>
                                <option value="right">Right-Aligned (Single Home)</option>
                            </select>
                        </div>
                        </div>
                    </section>

                    <!-- Robot Configuration Section -->
                    <section class="section">
                        <h2 class="section-header">Robot Configuration<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div class="form-group">
                            <label for="robotLength">Length (cm):</label>
                            <input type="number" id="robotLength" value="16.5" min="1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="robotWidth">Width (cm):</label>
                            <input type="number" id="robotWidth" value="15" min="1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="wheelOffset">Wheel Offset from Back (cm):</label>
                            <input type="number" id="wheelOffset" value="3.1" min="0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="wheelCircumference">Wheel Circumference (cm):</label>
                            <input type="number" id="wheelCircumference" value="19.6" min="0.1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="wheelBase">Wheel Base (cm):</label>
                            <input type="number" id="wheelBase" value="13.3" min="0.1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="robotImageUrl">Robot Image URL (optional):</label>
                            <input type="url" id="robotImageUrl" value="img/DadBot.png" placeholder="https://...">
                        </div>
                        </div>
                    </section>

                    <!-- Starting Position Section -->
                    <section class="section">
                        <h2 class="section-header">Starting Position<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div class="form-group">
                            <label for="startX">X Position (cm):</label>
                            <input type="number" id="startX" value="33" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="startY">Y Position (cm):</label>
                            <input type="number" id="startY" value="3.3" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="startAngle">Orientation (degrees):</label>
                            <input type="number" id="startAngle" value="0" step="1">
                        </div>
                        </div>
                    </section>
                    </div>
                    
                    <!-- Program Tab -->
                    <div class="tab-content" data-tab="program">
                    <section class="section program-section">
                        <h2 class="section-header">Program<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div id="programBlocks" class="program-blocks"></div>
                        <div class="button-group">
                            <button id="addTextBlock" class="btn btn-secondary">Add Text Block</button>
                            <button id="addMoveBlock" class="btn btn-primary">Add Move Block</button>
                        </div>
                        </div>
                    </section>
                    </div>
                </div>
            </div>

            <!-- Bottom Actions Bar -->
            <div class="bottom-actions-bar">
                <div class="form-group">
                    <label for="planDate">Plan Date:</label>
                    <input type="date" id="planDate">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="printRobotConfig">
                        Include Robot Configuration in Print
                    </label>
                </div>
                <div class="button-group">
                    <button id="exportBtn" class="btn btn-primary">Export JSON</button>
                    <button id="importBtn" class="btn btn-secondary">Import JSON</button>
                    <button id="printBtn" class="btn btn-secondary">Print Plan</button>
                </div>
                <input type="file" id="importFile" accept=".json" style="display: none;">
            </div>
        </div>

        <!-- Right Panel: Canvas (75%) -->
        <div class="right-panel">
            <div class="canvas-description">
                <label for="description">Description (optional):</label>
                <textarea id="description" rows="2" placeholder="Plan description..."></textarea>
            </div>
            <canvas id="missionCanvas"></canvas>
        </div>
    </div>

    <!-- Hidden print template -->
    <div id="printTemplate" style="display: none;">
        <div class="print-content">
            <div class="print-header">
                <img id="printTeamLogo" class="print-logo" style="display: none;" alt="Team Logo">
                <h1 id="printTeamName"></h1>
                <p id="printPlanDate" class="print-date"></p>
            </div>
            <div class="print-description"></div>
            <div class="print-canvas-container">
                <canvas id="printCanvas"></canvas>
            </div>
            <div class="print-watermark">Created with Mission Path Planner</div>
            <div class="print-program">
                <h2>Program</h2>
                <div id="printProgramBlocks"></div>
            </div>
            <div class="print-config">
                <h2>Robot Configuration</h2>
                <div id="printRobotConfig"></div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/robot.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/blocks.js"></script>
    <script src="js/pathCalculator.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/print.js"></script>
    <script src="app.js"></script>
</body>
</html>
