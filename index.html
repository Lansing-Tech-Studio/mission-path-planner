<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Path Planner</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
</head>
<body>
    <div class="container">
        <!-- Left Panel: Split into Subpanels with Bottom Actions (25%) -->
        <div class="left-panel">
            <h1>Mission Path Planner</h1>
            
            <div class="sidebar-main">
                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab-button active" data-tab="program">Program</button>
                    <button class="tab-button" data-tab="setup">Setup</button>
                </div>
                
                <!-- Tab Content Container -->
                <div class="tab-content-container">
                    <!-- Program Tab -->
                    <div class="tab-content active" data-tab="program">
                    <section class="section program-section">
                        <h2 class="section-header">Program<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div id="programBlocks" class="program-blocks"></div>
                        <div class="button-group">
                            <button id="addMoveBlock" class="btn btn-success icon-btn" title="Add Move Block">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 8v8M8 12h8"/>
                                </svg>
                                <span class="btn-text">Move</span>
                            </button>
                            <button id="addTextBlock" class="btn btn-neutral icon-btn" title="Add Text Block">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke-width="2">
                                    <path d="M4 7h16M4 12h16M4 17h10"/>
                                </svg>
                                <span class="btn-text">Text</span>
                            </button>
                        </div>
                        </div>
                    </section>
                    </div>
                    
                    <!-- Setup Tab -->
                    <div class="tab-content" data-tab="setup">
                    <!-- Team Info Section -->
                    <section class="section">
                        <h2 class="section-header">Team Info<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div class="form-group">
                            <label for="teamName">Team Name:</label>
                            <input type="text" id="teamName" value="Dad's Rule" placeholder="Enter team name">
                        </div>
                        <div class="form-group">
                            <label for="teamLogo">Team Logo URL (optional):</label>
                            <input type="url" id="teamLogo" value="https://lansingtechstudio.org/assets/images/logo.png" placeholder="https://...">
                        </div>
                        </div>
                    </section>

                    <!-- Robot Configuration Section -->
                    <section class="section">
                        <h2 class="section-header">Robot Configuration<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div class="form-group">
                            <label for="robotPreset">Load Preset:</label>
                            <select id="robotPreset">
                                <option value="">-- Select a Robot --</option>
                                <option value="dadbot">DadBot</option>
                                <option value="coopbot">Coop Bot (Arvind Seshan)</option>
                                <option value="lego-advanced">LEGO Advanced Driving Base</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="robotLength">Length (cm):</label>
                            <input type="number" id="robotLength" value="16.5" min="1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="robotWidth">Width (cm):</label>
                            <input type="number" id="robotWidth" value="15" min="1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="wheelOffset">Wheel Offset from Back (cm):</label>
                            <input type="number" id="wheelOffset" value="3.1" min="0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="wheelCircumference">Wheel Circumference (cm):</label>
                            <input type="number" id="wheelCircumference" value="19.6" min="0.1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="wheelBase">Wheel Base (cm):</label>
                            <input type="number" id="wheelBase" value="13.3" min="0.1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="robotImageUrl">Robot Image URL (optional):</label>
                            <input type="url" id="robotImageUrl" value="img/DadBot.png" placeholder="https://...">
                        </div>
                        </div>
                    </section>

                    <!-- Mat Selection Section -->
                    <section class="section">
                        <h2 class="section-header">Mission Mat<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div class="form-group">
                            <label for="matSelect">Select Mat:</label>
                            <select id="matSelect">
                                <option value="blank">Blank Mat</option>
                                <option value="2025-unearthed" selected>2025 Unearthed</option>
                                <option value="2024-submerged">2024 Submerged</option>
                                <option value="2023-masterpiece">2023 Masterpiece</option>
                                <option value="custom">Custom URL</option>
                            </select>
                        </div>
                        <div class="form-group" id="customMatUrlGroup" style="display: none;">
                            <label for="customMatUrl">Custom Mat URL:</label>
                            <input type="url" id="customMatUrl" placeholder="https://...">
                        </div>
                        <div class="form-group">
                            <label for="matAlignment">Mat Alignment:</label>
                            <select id="matAlignment">
                                <option value="centered">Centered</option>
                                <option value="right">Right-Aligned (Single Home)</option>
                            </select>
                        </div>
                        </div>
                    </section>

                    <!-- Starting Position Section -->
                    <section class="section">
                        <h2 class="section-header">Starting Position<span class="collapse-icon">−</span></h2>
                        <div class="section-content">
                        <div class="form-group">
                            <label for="startX">X Position (cm, from left edge):</label>
                            <input type="number" id="startX" value="30" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="startY">Y Position (cm, from bottom edge):</label>
                            <input type="number" id="startY" value="0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="startAngle">Orientation (degrees, 0° = North):</label>
                            <input type="number" id="startAngle" value="0" step="1">
                        </div>
                        </div>
                    </section>
                    </div>
                </div>
            </div>


        </div>

        <!-- Resize Handle -->
        <div class="resize-handle">
            <button class="panel-toggle" title="Toggle Panel (Ctrl+B)">«</button>
        </div>

        <!-- Right Panel: Canvas -->
        <div class="right-panel">
            <div class="canvas-description">
                <label for="description">Description (optional):</label>
                <textarea id="description" rows="2" placeholder="Plan description..."></textarea>
            </div>
            
            <!-- Plan Controls Bar -->
            <div class="plan-controls-bar">
                <div class="plan-date-group">
                    <label for="planDate">Plan Date:</label>
                    <input type="date" id="planDate">
                </div>
                <div class="print-config-group">
                    <label>
                        <input type="checkbox" id="printRobotConfig">
                        <span class="checkbox-label">Include Robot Configuration in Print</span>
                    </label>
                </div>
                <div class="plan-actions">
                    <button id="exportBtn" class="icon-btn" title="Export Plan">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        <span class="btn-text">Export</span>
                    </button>
                    <button id="importBtn" class="icon-btn" title="Import Plan">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        <span class="btn-text">Import</span>
                    </button>
                    <button id="printBtn" class="icon-btn" title="Print Plan">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 6 2 18 2 18 9"/>
                            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                            <rect x="6" y="14" width="12" height="8"/>
                        </svg>
                        <span class="btn-text">Print</span>
                    </button>
                </div>
            </div>
            <input type="file" id="importFile" accept=".json" style="display: none;">
            
            <canvas id="missionCanvas"></canvas>
        </div>
    </div>

    <!-- Hidden print template -->
    <div id="printTemplate" style="display: none;">
        <div class="print-content">
            <div class="print-header">
                <img id="printTeamLogo" class="print-logo" style="display: none;" alt="Team Logo">
                <h1 id="printTeamName"></h1>
                <p id="printPlanDate" class="print-date"></p>
            </div>
            <div class="print-description"></div>
            <div class="print-canvas-container">
                <canvas id="printCanvas"></canvas>
            </div>
            <div class="print-watermark">Created with Mission Path Planner</div>
            <div class="print-program">
                <h2>Program</h2>
                <div id="printProgramBlocks"></div>
            </div>
            <div class="print-config">
                <h2>Robot Configuration</h2>
                <div id="printRobotConfig"></div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/robot.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/blocks.js"></script>
    <script src="js/pathCalculator.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/print.js"></script>
    <script src="app.js"></script>
</body>
</html>
